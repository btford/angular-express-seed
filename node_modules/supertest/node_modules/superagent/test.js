
var request = require('./');
var http = require('http');
var parse = require('url').parse;

var url = 'http://arstechnica.com/information-technology/2013/05/fios-customer-discovers-the-limits-of-unlimited-data-77-tb-in-month/';
var n = 10;
// var options = parse(url);
// options.method = 'HEAD';
// options.agent = false;

// while (n--) {
//   var req = http.request(options);

//   req.on('response', function(res){
//     console.log(res.statusCode);
//   });

//   req.on('error', function(err){
//     console.log(err.message);
//   });

//   req.end();
// }

while (n--) {
  request
  .head(url)
  .end(function(err, res){
    if (err) return console.error(err.message);
    console.log(res.status);
  })
}
